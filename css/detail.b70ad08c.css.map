{"version":3,"sources":["webpack:///src/views/src/views/Detail.vue"],"names":[],"mappings":"AAqvBA,iCACA,wCAAA,CAAA,gCAAA,CAAA,wBAAA,CAAA,8CACA,CAEA,kCACA,SACA,CAEA,yCACA,8BAAA,CAAA,sBACA,CAMA,2EACA,YACA,CAEA,2BACA,UAAA,CACA,cACA,CAEA,0BACA,SACA,CAEA,wBACA,WAAA,CACA,UACA,CAEA,yBACA,YACA,CAEA,wBACA,8CAAA,CAAA,sCAAA,CACA,SAAA,CACA,UAAA,CACA,cAAA,CACA,eAAA,CACA,QAAA,CACA,SACA,CAEA,6BACA,cAAA,CACA,SAAA,CACA,SAAA,CACA,SACA,CAEA,kCACA,cAAA,CACA,SAAA,CACA,QAAA,CACA,SACA,CAEA,uBACA,SAAA,CACA,iBAAA,CACA,oEAAA,CAAA,4DACA,CAEA,yBACA,iBAAA,CACA,oBACA,CAEA,wBACA,gBACA,CAEA,sBACA,cACA,CAEA,uBACA,aACA,CAEA,uBACA,aACA,CAEA,yCACA,4BACA,UACA,CACA","file":"detail.b70ad08c.css","sourcesContent":["<template>\n<el-container>\n  <!-- <el-aside class=\"hidden-sm-and-down\" v-if=\"aside\">\n  </el-aside>\n  <div class=\"hidden-sm-and-down aside\" v-if=\"aside\">\n    <list></list>\n  </div>\n  <el-button icon=\"el-icon-close\" size=\"mini\" type=\"danger\" circle class=\"hidden-sm-and-down sideButtonClose\" @click=\"aside=!aside\" v-if=\"aside\"></el-button>\n  <el-button icon=\"el-icon-search\" circle size=\"mini\" class=\"hidden-sm-and-down sideButton\" @click=\"aside=!aside\" v-if=\"!aside\"></el-button> -->\n  <el-main v-loading=\"!topPhoto\">\n    <img :src=\"topPhoto.replace('http:','https:')\" alt=\"topPhoto\" class=\"topPhoto\" v-if=\"topPhoto\">\n\n    <el-row type=\"flex\" justify=\"space-around\">\n      <el-col :span=\"aside ? 24 : 21\" class=\"container\">\n\n        <el-row v-if=\"topPhoto\">\n          <el-col :span=\"6\" :xs=\"24\" :xl=\"4\">\n            <el-card class=\"box-card center\" shadow=\"hover\">\n              <div slot=\"header\">\n                <h2>{{uname}}</h2>\n                <a :href=\"`https://live.bilibili.com/${roomid}`\" v-if=\"liveStatus\" target=\"_blank\">\n                  <el-tag size=\"medium\">Áõ¥Êí≠‰∏≠</el-tag>\n                </a>\n              </div>\n              <div v-loading=\"!face\">\n                <img :src=\"face.replace('http:','https:')\" class=\"face\" v-if=\"face\">\n                <img src=\"@/assets/face.jpg\" class=\"face\" v-else>\n              </div>\n              <el-divider></el-divider>\n              ‰∏™‰∫∫Á©∫Èó¥:\n              <br>\n              <a :href=\"`https://space.bilibili.com/${mid}`\" target=\"_blank\">\n                {{`https://space.bilibili.com/${mid}`}}\n              </a>\n              <template v-if=\"roomid\">\n                <el-divider></el-divider>\n                Áõ¥Êí≠Èó¥:\n                <br>\n                <a :href=\"`https://live.bilibili.com/${roomid}`\" target=\"_blank\">\n                  {{`https://live.bilibili.com/${roomid}`}}\n                </a>\n              </template>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                ÂÖ≥Ê≥®\n              </div>\n              <div class=\"center\">\n                <span class=\"el-icon-star-on big\"></span>\n                <h3>{{follower | parseNumber}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                ËßÜÈ¢ë\n              </div>\n              <div class=\"center\">\n                <span class=\"el-icon-picture-outline-round big\"></span>\n                <h3>{{video | parseNumber}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"12\" :xs=\"24\" :xl=\"8\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Á≠æÂêç\n              </div>\n              <p>\n                {{sign}}\n              </p>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                24Â∞èÊó∂Á≤â‰∏ùÂèòÂåñ\n              </div>\n              <div class=\"center\">\n                <span v-if=\"rise >= 0\" class=\"big el-icon-caret-top\"></span>\n                <span v-else class=\"big el-icon-caret-bottom\"></span>\n                <h3 v-if=\"rise > 0\" class=\"more\">+{{rise | parseNumber}}</h3>\n                <h3 v-if=\"rise < 0\" class=\"less\">{{rise | parseNumber}}</h3>\n                <h3 v-if=\"rise === 0\">{{rise | parseNumber}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n        </el-row>\n        <el-divider><i class=\"el-icon-s-data\"></i></el-divider>\n        <el-row v-if=\"topPhoto\">\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\" v-if=\"guardNum\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Ëà∞Âõ¢\n              </div>\n              <div class=\"center\">\n                <span class=\"el-icon-location-outline big\"></span>\n                <h3>{{guardNum | parseNumber}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\" v-if=\"guardNum\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                ÂÖ≥Ê≥®/Ëà∞Âõ¢ ÊØî\n              </div>\n              <div class=\"center\">\n                <span class=\"big el-icon-star-on\">/<span class=\"el-icon-location-outline\" /></span>\n                <h3>‚âà {{Math.round(follower/guardNum) | parseNumber}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\" v-if=\"roomid\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Áõ¥Êí≠Èó¥ <el-checkbox v-model=\"DD\" title=\"ÂºÄÊí≠ÊèêÁ§∫\"></el-checkbox>\n                <a :href=\"`https://live.bilibili.com/${roomid}`\" v-if=\"liveStatus\" target=\"_blank\" class=\"right\">\n                  <el-tag size=\"medium\">‰∫∫Ê∞î {{online}}</el-tag>\n                </a>\n              </div>\n              <div class=\"center\">\n                <h3>{{title}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\" v-if=\"liveNum\" v-loading=\"weekLive === undefined\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Êú¨Âë®Áõ¥Êí≠\n              </div>\n              <div class=\"center\" v-if=\"weekLive === 'üêü'\">\n                <span style=\"font-size: 72px;\">üêü</span>\n                <h3>Ê≤°Êí≠</h3>\n              </div>\n              <div class=\"center\" v-else>\n                <span class=\"big el-icon-d-caret\"></span>\n                <h3>{{weekLive}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\" v-if=\"liveNum\" v-loading=\"!averageLive\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Âë®ÂùáÁõ¥Êí≠\n              </div>\n              <div class=\"center\">\n                <span class=\"big el-icon-d-caret\"></span>\n                <h3>{{averageLive}}</h3>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"6\" :xs=\"12\" :xl=\"4\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Zeroroku <small>by JannchieËßÅÈΩê</small>\n              </div>\n              <div class=\"center\">\n                <a :href=\"`https://zeroroku.com/bilibili/author/${mid}`\" target=\"_blank\">\n                  <img src=\"@/assets/biliob-frontend/public/img/icons/android-chrome-192x192.png\" alt=\"Zeroroku\" width=\"72\">\n                  {{`https://zeroroku.com/bilibili/author/${mid}`}}\n                </a>\n              </div>\n            </el-card>\n          </el-col>\n        </el-row>\n        <el-divider><i class=\"el-icon-s-data\"></i></el-divider>\n        <el-row>\n          <el-col :span=\"maxGuardNum?12:24\" :xs=\"24\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                <span class=\"el-icon-star-on\"></span> ÂÖ≥Ê≥®ÂéÜÂè≤ <span class=\"el-icon-star-on\"></span>\n                <el-button size=\"mini\" @click=\"loadMoreActive\" v-if=\"activeSkip\" :loading=\"loadingActive\" title=\"ÊòæÁ§∫Êõ¥Â§ö\" class=\"right\">(‰∏ÄÈÉ®ÂàÜ)</el-button>\n              </div>\n              <ve-line :data=\"{rows:hourFollowerChange}\" :settings=\"activeLine\" :extend=\"activeExtend\" :data-zoom=\"dataZoomWeek\" :not-set-unchange=\"unchange\" v-loading=\"!hourFollowerChange.length\"></ve-line>\n            </el-card>\n          </el-col>\n          <el-col :span=\"12\" :xs=\"24\" v-if=\"maxGuardNum\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                Ëà∞Âõ¢ÂèòÂåñ\n              </div>\n              <ve-line :data=\"{rows:guardFilter}\" :settings=\"guardLine\" :extend=\"guardExtend\" :data-zoom=\"dataZoomMonth\" :not-set-unchange=\"['dataZoom']\" v-loading=\"!guard.length\"></ve-line>\n            </el-card>\n          </el-col>\n        </el-row>\n        <el-divider><i class=\"el-icon-s-data\"></i></el-divider>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-card class=\"box-card\" shadow=\"hover\">\n              <div slot=\"header\">\n                ËøáÂéª‰∏ÄÂë®\n              </div>\n              <el-table :data=\"pastWeek\" stripe>\n                <el-table-column label=\"Êó•Êúü\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.date\">{{scope.row.date}}</span>\n                    <span v-else style=\"font-size:16px;\">Êó•Âπ≥Âùá</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"ÂÖ≥Ê≥®Â¢ûÈáè\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.followerChange>0\" class=\"more\">+{{scope.row.followerChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.followerChange<0\" class=\"less\">{{scope.row.followerChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.followerChange==0\">{{scope.row.followerChange | parseNumber}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"follower\" label=\"ÊÄªÂÖ≥Ê≥®\">\n                </el-table-column>\n                <el-table-column label=\"Êó•Êí≠Êîæ\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.archiveViewChange>0\" class=\"more\">+{{scope.row.archiveViewChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.archiveViewChange<0\" class=\"less\">{{scope.row.archiveViewChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.archiveViewChange==0\">{{scope.row.archiveViewChange | parseNumber}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"archiveView\" label=\"ÊÄªÊí≠Êîæ\">\n                </el-table-column>\n                <el-table-column label=\"Ëà∞Âõ¢ÂèòÂåñ\" v-if=\"maxGuardNum\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.guardNumChange>0\" class=\"more\">+{{scope.row.guardNumChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.guardNumChange<0\" class=\"less\">{{scope.row.guardNumChange | parseNumber}}</span>\n                    <span v-if=\"scope.row.guardNumChange==0\">{{scope.row.guardNumChange | parseNumber}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"guardNum\" label=\"Ëà∞Âõ¢\" v-if=\"maxGuardNum\">\n                </el-table-column>\n              </el-table>\n            </el-card>\n          </el-col>\n        </el-row>\n        <template v-if=\"roomid\">\n          <el-divider><i class=\"el-icon-s-fold\"></i></el-divider>\n          <el-row>\n            <el-col :span=\"24\">\n              <el-card class=\"box-card\" shadow=\"hover\">\n                <div slot=\"header\">\n                  <span style=\"font-size:20px;\">Áõ¥Êí≠Èó¥ÂºπÂπï: <a href=\"https://bilichat.3shain.com\" target=\"_blank\">BILICHAT</a></span> by 3Shain\n                </div>\n                <iframe :src=\"`/BiliChat/index.html?pure=true&room=${roomid}`\" width=\"100%\" height=\"400px\" frameborder=\"0\"></iframe>\n              </el-card>\n            </el-col>\n          </el-row>\n        </template>\n        <el-divider><i class=\"el-icon-s-data\"></i></el-divider>\n        <el-row v-if=\"topPhoto\">\n          <el-col :span=\"8\" :xs=\"24\">\n            <el-table :data=\"parsed\" stripe :show-header=\"false\">\n              <el-table-column prop=\"name\">\n              </el-table-column>\n              <el-table-column>\n                <template slot-scope=\"scope\">\n                  <template v-if=\"typeof scope.row.value === 'number'\">\n                    <span>{{scope.row.value | parseNumber}}</span>\n                    <span class=\"right\" v-if=\"scope.row.value>=10000\">({{scope.row.value | parseNumberOld}})</span>\n                  </template>\n                  <template v-if=\"typeof scope.row.value === 'string'\">\n                    <span>{{scope.row.value}}</span>\n                  </template>\n                  <template v-if=\"scope.row.space\">\n                    <a :href=\"`https://space.bilibili.com/${scope.row.space}`\" target=\"_blank\">\n                      {{scope.row.space}}\n                    </a>\n                  </template>\n                  <template v-if=\"scope.row.room\">\n                    <template v-if=\"scope.row.room==='Êó†'\">\n                      Êó†\n                    </template>\n                    <a :href=\"`https://live.bilibili.com/${scope.row.room}`\" target=\"_blank\" v-else>\n                      {{scope.row.room}}\n                    </a>\n                  </template>\n                  <template v-if=\"typeof scope.row.liveStatus !== 'undefined'\">\n                    <a :href=\"`https://live.bilibili.com/${roomid}`\" v-if=\"scope.row.liveStatus\" target=\"_blank\">\n                      <el-tag size=\"small\">Áõ¥Êí≠‰∏≠</el-tag>\n                    </a>\n                    <template v-else>\n                      {{scope.row.moment}}\n                    </template>\n                  </template>\n                </template>\n              </el-table-column>\n            </el-table>\n          </el-col>\n          <el-col :span=\"16\" :xs=\"24\">\n            JSONÊï∞ÊçÆ:\n            <tree-view :data=\"info\" :options=\"{maxDepth: 2, rootObjectKey: 'info'}\"></tree-view>\n          </el-col>\n        </el-row>\n\n      </el-col>\n    </el-row>\n\n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport Vue from 'vue'\n// import { mapState, mapGetters } from 'vuex'\nimport moment from 'moment'\nimport TreeView from 'vue-json-tree-view'\nimport Push from 'push.js'\nimport ky from 'ky'\n\nimport VeLine from 'v-charts/lib/line.common'\n\nimport 'echarts/lib/component/dataZoom'\n\nimport { get, getDeflateTimeSeries } from '@/socket'\n\nimport { activeAnalyzer } from '@/worker'\n\nVue.use(TreeView)\n\nexport default {\n  props: ['mid'],\n  data: function() {\n    this.dataZoomWeek = [{\n      type: 'slider',\n      startValue: (new Date()).getTime() - 1000 * 60 * 60 * 24 * 7,\n    }]\n    this.dataZoomMonth = [{\n      type: 'slider',\n      startValue: (new Date()).getTime() - 1000 * 60 * 60 * 24 * 30,\n    }]\n    this.activeLine = {\n      dimension: ['time'],\n      metrics: ['follower', 'change'],\n      labelMap: {\n        follower: 'ÂÖ≥Ê≥®',\n        change: 'Â¢ûÈáè',\n      },\n      yAxisName: ['ÂÖ≥Ê≥®', 'ÊØèÂ∞èÊó∂Â¢ûÈáè'],\n      scale: [true],\n      xAxisType: 'time',\n      axisSite: { right: ['change'] },\n    }\n    this.activeExtend = {\n      'series.0.symbol': 'none',\n      'series.1.symbol': 'none',\n    }\n    this.liveLine = {\n      dimension: ['time'],\n      metrics: ['online', 'gold'],\n      labelMap: {\n        online: '‰∫∫Ê∞î',\n        gold: 'ÈáëÁìúÂ≠ê',\n      },\n      yAxisName: ['‰∫∫Ê∞î', 'ÊØèÂàÜÈíüÈáëÁìúÂ≠ê'],\n      xAxisType: 'time',\n      axisSite: { right: ['gold'] },\n    }\n    this.liveExtend = {\n      'series.0.symbol': 'none',\n      'series.0.sampling': 'max',\n    }\n    this.guardLine = {\n      dimension: ['time'],\n      metrics: ['guardNum'],\n      labelMap: {\n        guardNum: 'Ëà∞Âõ¢',\n      },\n      scale: [true],\n      yAxisName: ['Ëà∞Âõ¢'],\n      xAxisType: 'time',\n    }\n    this.guardExtend = {\n      'series.0.symbol': 'none',\n      'series.0.step': 'end',\n      'series.0.smooth': false,\n    }\n    return {\n      aside: false,\n      active: [],\n      activeWithFollowerChange: [],\n      activeSkip: undefined,\n      info: {},\n      rawLive: [],\n      guard: [],\n      loadingLive: false,\n      loadingActive: false,\n      unchange: [],\n      DD: !!JSON.parse(localStorage.getItem(this.mid)),\n      fullLive: false,\n      liveDisplayTime: undefined,\n      liveDisplayZoom: {\n        type: 'slider',\n        startValue: 0,\n        endValue: 0,\n      },\n      liveDisplayInfo: {},\n      liveDisplayDanmaku: [],\n      liveDisplayDanmakuNumber: 0,\n      liveDisplayDanmakuByPerson: {},\n      liveDisplayCoinGift: [],\n      liveDisplayCoinGiftCost: 0,\n      liveDisplaySilverGift: [],\n      liveDisplaySilverGiftCost: 0,\n      liveDisplayGiftByType: {},\n      liveDisplayGiftByPerson: {}\n    }\n  },\n  beforeDestroy() {\n    this.liveDisplayTime = Date.now()\n  },\n  watch: {\n    mid: {\n      immediate: true,\n      async handler() {\n        this.active = []\n        this.info = {}\n        this.guard = []\n        let info = await get('info', this.mid)\n        this.info = info\n        let { recordNum, guardChange, mid, uuid } = info\n\n        if (guardChange > 0) {\n          let guard = await getDeflateTimeSeries('bulkGuardCompressed', { guardChange, mid })\n          this.guard = guard\n        }\n\n        this.DD = !!JSON.parse(localStorage.getItem(this.mid))\n\n        this.activeSkip = recordNum\n        let active = []\n        /* beautify ignore:start */\n        for (; this.activeSkip && 7 * 24 * 60 * 60 * 1000 > ((active[active.length - 1]?.time || 0) - (active[0]?.time || 0));) {\n          this.activeSkip = Math.max(0, this.activeSkip - 500)\n          active = [...await getDeflateTimeSeries('bulkActiveRangeCompressed', { num: recordNum - active.length - this.activeSkip, skip: this.activeSkip, mid }), ...active]\n        }\n        /* beautify ignore:end */\n        this.active = await activeAnalyzer(active)\n        this.unchange = ['dataZoom']\n      },\n    },\n    DD: function(newValue) {\n      localStorage.setItem(this.mid, JSON.stringify(newValue))\n      Push.create(`${this.uname} Áõ¥Êí≠ÊèêÁ§∫ (${newValue ? 'ÂºÄÂêØ' : 'ÂÖ≥Èó≠'})`, { timeout: 2000 })\n    },\n    active(newValue) {\n      // this.followerChangeWorker.postMessage(newValue)\n    },\n  },\n  sockets: {\n    async connect() {\n      let info = await get('info', this.mid)\n      this.info = info\n      let { guardChange, mid, recordNum } = info\n      let active = await getDeflateTimeSeries('bulkActiveRangeCompressed', { mid, skip: this.activeSkip, num: recordNum - this.activeSkip })\n      this.active = await activeAnalyzer(active)\n      if (guardChange > 0) {\n        this.guard = await getDeflateTimeSeries('bulkGuardCompressed', { guardChange, mid })\n      }\n    },\n    detailInfo: function({ mid, data }) {\n      if (mid === Number(this.mid)) {\n        this.info = data\n      }\n    },\n    async detailActive({ mid, data }) {\n      if (mid === Number(this.mid)) {\n        this.active = await activeAnalyzer([...this.active, data])\n      }\n    },\n    detailGuard: function({ mid, data }) {\n      if (mid === Number(this.mid)) {\n        this.guard.push(data)\n      }\n    },\n  },\n  computed: {\n    pastWeek: function() {\n      let active = [...this.active]\n      let guard = [...this.guard]\n      if (!active.length) {\n        return []\n      }\n\n      let days = []\n      let guardDays = []\n\n      for (let i = guard.length - 1; i >= 0 && guardDays.length < 8; i--) {\n        let currentDate = moment(guard[i].time).format('M-D')\n        let nextDate\n        if (guard[i + 1]) {\n          nextDate = moment(guard[i + 1].time).format('M-D')\n        }\n        if (currentDate !== nextDate) {\n          guardDays.push({ date: currentDate, time: guard[i].time, guardNum: guard[i].guardNum })\n        }\n      }\n      guardDays.push({ time: 0, guardNum: this.guardNum })\n\n      for (let i = active.length - 1; i >= 0 && days.length < 8; i--) {\n        let currentDate = moment(active[i].time).format('M-D')\n        let lastDate = (days[days.length - 1] || {}).date\n        let guardNum = 0\n        for (let j = 0; j < guardDays.length; j++) {\n          if (!guardNum) {\n            if (guardDays[j].date === currentDate) {\n              guardNum = guardDays[j].guardNum\n            } else if (guardDays[j].time < active[i].time) {\n              guardNum = guardDays[j].guardNum\n            }\n          }\n        }\n        if (currentDate !== lastDate) {\n          days.push({\n            date: currentDate,\n            follower: active[i].follower,\n            archiveView: active[i].archiveView,\n            guardNum,\n          })\n        }\n      }\n\n      let pastWeek = []\n      for (let i = 1; i < days.length; i++) {\n        pastWeek.push({\n          ...days[i - 1],\n          followerChange: days[i - 1].follower - days[i].follower,\n          archiveViewChange: days[i - 1].archiveView - days[i].archiveView,\n          guardNumChange: days[i - 1].guardNum - days[i].guardNum,\n        })\n      }\n\n      let followerChangeSum = 0\n      let archiveViewChangeSum = 0\n      let guardNumChangeSum = 0\n      for (let { followerChange, archiveViewChange, guardNumChange } of pastWeek) {\n        followerChangeSum += followerChange\n        archiveViewChangeSum += archiveViewChange\n        guardNumChangeSum += guardNumChange\n      }\n\n      pastWeek.push({\n        followerChange: Math.round(followerChangeSum / pastWeek.length),\n        archiveViewChange: Math.round(archiveViewChangeSum / pastWeek.length),\n        guardNumChange: Math.round(guardNumChangeSum / pastWeek.length),\n        follower: '-',\n        guardNum: '-',\n        archiveView: '-',\n      })\n      return pastWeek\n        .map(w => ({ ...w, follower: w.follower.toLocaleString(), guardNum: w.guardNum.toLocaleString(), archiveView: w.archiveView.toLocaleString() }))\n    },\n    maxGuardNum: function() {\n      let max = this.guardNum\n      for (let i = 0; i < this.guard.length; i++) {\n        if (this.guard[i].guardNum > max) {\n          max = this.guard[i].guardNum\n        }\n      }\n      return max\n    },\n    hourFollowerChange: function() {\n      return this.active\n    },\n    guardFilter() {\n      return this.guard\n        .map(({ guardNum, time }, index) => {\n          if (guardNum === 0) {\n            let previous = this.guard[index - 1]\n            let next = this.guard[index + 1]\n            if (!previous || (previous.guardNum !== 0 && next && next.guardNum !== 0 && next.time - time < 1000 * 60 * 5 * 2)) {\n              return undefined\n            }\n          }\n          return { guardNum, time }\n        })\n        .filter(Boolean)\n    },\n    averageLive: function() {\n      if (!this.info.averageLive) {\n        return undefined\n      }\n      let duration = moment.duration(this.info.averageLive, 'ms')\n      let result = []\n      let d = Math.floor(duration.asDays())\n      let h = duration.hours()\n      let m = duration.minutes()\n      if (d) {\n        result.push(`${d} Â§©`)\n      }\n      if (h) {\n        result.push(`${h} Â∞èÊó∂`)\n      }\n      if (m) {\n        result.push(`${m} ÂàÜÈíü`)\n      }\n      if (!result.length) {\n        result.push('‰∏ÄÂàÜÈíü‰∏çÂà∞')\n      }\n      return result.join(' ')\n    },\n    weekLive() {\n      if (this.info.weekLive === undefined) {\n        return undefined\n      }\n      if (this.info.weekLive === 0) {\n        return 'üêü'\n      }\n      let duration = moment.duration(this.info.weekLive, 'ms')\n      let result = []\n      let d = Math.floor(duration.asDays())\n      let h = duration.hours()\n      let m = duration.minutes()\n      if (d) {\n        result.push(`${d} Â§©`)\n      }\n      if (h) {\n        result.push(`${h} Â∞èÊó∂`)\n      }\n      if (m) {\n        result.push(`${m} ÂàÜÈíü`)\n      }\n      return result.join(' ')\n    },\n    liveDisplayDanmakuByPersonRank() {\n      return Object.values(this.liveDisplayDanmakuByPerson)\n        .sort((a, b) => b.number - a.number)\n        .filter((_, index) => index < 5)\n    },\n    liveDisplayDanmakuByPersonNumber() {\n      return Object.keys(this.liveDisplayDanmakuByPerson).length\n    },\n    liveDisplayGiftByPersonRank() {\n      return Object.values(this.liveDisplayGiftByPerson)\n        .sort((a, b) => b.coin - a.coin)\n        .filter((_, index) => index < 5)\n    },\n    liveDisplayGiftByPersonNumber() {\n      return Object.keys(this.liveDisplayGiftByPerson).length\n    },\n    face: function() {\n      return this.info.face\n    },\n    roomid: function() {\n      return this.info.roomid\n    },\n    uname: function() {\n      return this.info.uname || this.mid\n    },\n    sign: function() {\n      return this.info.sign || this.mid\n    },\n    topPhoto: function() {\n      return this.info.topPhoto\n    },\n    video: function() {\n      return this.info.video\n    },\n    archiveView: function() {\n      return this.info.archiveView\n    },\n    notice: function() {\n      return this.info.notice\n    },\n    liveStatus: function() {\n      return this.info.liveStatus\n    },\n    follower: function() {\n      return this.info.follower\n    },\n    guardNum: function() {\n      return this.info.guardNum\n    },\n    liveNum: function() {\n      return this.info.liveNum\n    },\n    lastLiveTime() {\n      return this.info.lastLive.time\n    },\n    rise() {\n      return this.info.rise\n    },\n    recordNum() {\n      return this.info.recordNum\n    },\n    online: function() {\n      return this.info.online\n    },\n    title: function() {\n      return this.info.title\n    },\n    time: function() {\n      return this.info.time\n    },\n    guardChange: function() {\n      return this.info.guardChange\n    },\n    parsed: function() {\n      return [\n        { name: 'ÂêçÂ≠ó', value: this.uname },\n        { name: 'ÂÖ≥Ê≥®', value: this.follower },\n        { name: 'Á©∫Èó¥', space: String(this.mid) },\n        { name: 'Áõ¥Êí≠Èó¥', room: String(this.roomid || 'Êó†') },\n        { name: 'Á≠æÂêç', value: this.sign },\n        { name: 'ËßÜÈ¢ëÊï∞', value: this.video },\n        { name: 'Áõ¥Êí≠Ê†áÈ¢ò', value: this.title },\n        { name: 'Ëà∞Âõ¢', value: this.guardNum },\n        {\n          name: 'Áõ¥Êí≠Áä∂ÊÄÅ',\n          liveStatus: this.liveStatus,\n          past: this.lastLiveTime,\n          moment: (typeof this.lastLiveTime === 'number') ? moment(this.lastLiveTime).fromNow() : '‰∏çÁü•ÈÅì‚Üí_‚Üí',\n        },\n        { name: 'ÂÖ¨Âëä', value: this.notice },\n        { name: 'Áõ¥Êí≠Êó∂Èïø', value: `${Math.round(this.liveNum / 12)} Êó∂` },\n        { name: '‰∫∫Ê∞î', value: this.online },\n        { name: '‰∏äÊ¨°Êõ¥Êñ∞', value: moment(this.time).fromNow() },\n      ]\n    },\n    uuid() {\n      return this.info.uuid\n    },\n  },\n  components: {\n    VeLine,\n  },\n  methods: {\n    durationFormatter({ duration }) {\n      duration = moment.duration(duration, 'seconds')\n      let result = []\n      let h = Math.floor(duration.asHours())\n      let m = duration.minutes()\n      if (h) {\n        result.push(`${h} Â∞èÊó∂`)\n      }\n      if (m) {\n        result.push(`${m} ÂàÜÈíü`)\n      }\n      if (!result.length) {\n        result.push('‰∏ÄÂàÜÈíü‰∏çÂà∞')\n      }\n      return result.join(' ')\n    },\n    timeFormatter({ beginTime }) {\n      return moment(beginTime * 1000).format('MÊúàDÊó• H:mm')\n    },\n    async loadMoreActive() {\n      this.loadingActive = true\n      const skip = Math.max(this.activeSkip - 1000, 0)\n      const num = this.activeSkip - skip\n      this.activeSkip = skip\n      let active = await getDeflateTimeSeries('bulkActiveRangeCompressed', { skip, num, mid: this.mid })\n      this.active = await activeAnalyzer([...active, ...this.active])\n      this.loadingActive = false\n    },\n  },\n}\n</script>\n\n<style scoped>\n.flip-list-move {\n  transition: transform 0.5s;\n}\n\n.flip-list-enter {\n  opacity: 0;\n}\n\n.flip-list-enter-active {\n  transition: opacity 0.5s;\n}\n\n.flip-list-leave {\n  display: none;\n}\n\n.flip-list-leave-active {\n  display: none;\n}\n\n.topPhoto {\n  width: 100%;\n  margin-top: 1px;\n}\n\n.el-main {\n  padding: 0px;\n}\n\n.right {\n  float: right;\n  color: gray;\n}\n\n.el-col {\n  padding: 12px;\n}\n\n.aside {\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n  height: 85%;\n  position: fixed;\n  overflow-y: auto;\n  top: 80px;\n  left: 20px;\n}\n\n.sideButton {\n  position: fixed;\n  top: 100px;\n  left: 40px;\n  z-index: 2;\n}\n\n.sideButtonClose {\n  position: fixed;\n  z-index: 2;\n  top: 70px;\n  left: 10px;\n}\n\n.face {\n  width: 60%;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\n}\n\n.center {\n  text-align: center;\n  word-wrap: break-word;\n}\n\n.right {\n  text-align: right;\n}\n\n.big {\n  font-size: 42px;\n}\n\n.more {\n  color: #00da3c;\n}\n\n.less {\n  color: #ec0000;\n}\n\n@media only screen and (max-width: 991px) {\n  .container {\n    width: 100%;\n  }\n}\n</style>\n"]}